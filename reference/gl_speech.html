<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Turn audio into text"><title>Call Google Speech API — gl_speech • googleLanguageR</title><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Call Google Speech API — gl_speech"><meta property="og:description" content="Turn audio into text"><meta property="og:image" content="https://docs.ropensci.org/googleLanguageR/logo.png"><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript><!-- End Matomo Code --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">googleLanguageR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/translation.html">
    <span class="fa fa-globe fa-lg"></span>
     
    Translation API
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/nlp.html">
    <span class="fa fa-object-group fa-lg"></span>
     
    NLP API
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/speech.html">
    <span class="fa fa-comment fa-lg"></span>
     
    Speech API
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/text-to-speech.html">
    <span class="fa fa-phone fa-lg"></span>
     
    Text-to-Speech API
  </a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-help">Help</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-help">
    <a class="dropdown-item" href="../reference/index.html">
      <span class="fa fa-info"></span>
       
      Function Reference
    </a>
    <a class="external-link dropdown-item" href="https://cloud.google.com/products/machine-learning/">
      <span class="fa fa-google"></span>
       
      Google Documentation
    </a>
    <a class="external-link dropdown-item" href="https://github.com/ropensci/googleLanguageR">
      <span class="fa fa-github"></span>
       
      Development site
    </a>
    <a class="external-link dropdown-item" href="https://docs.google.com/forms/d/e/1FAIpQLSerjirmMpB3b7LmBs_Vx_XPIE9IrhpCpPg1jUcpfBcivA3uBw/viewform">
      <span class="fa fa-slack"></span>
       
      Slack Support Channel
    </a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/nlp.html">Google Natural Language API</a>
    <a class="dropdown-item" href="../articles/setup.html">Introduction to googleLanguageR</a>
    <a class="dropdown-item" href="../articles/speech.html">Google Cloud Speech-to-Text API</a>
    <a class="dropdown-item" href="../articles/text-to-speech.html">Google Cloud Text-to-Speech API</a>
    <a class="dropdown-item" href="../articles/translation.html">Google Cloud Translation API</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/googleLanguageR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Call Google Speech API</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/googleLanguageR/blob/HEAD/R/speech-to-text.R" class="external-link"><code>R/speech-to-text.R</code></a></small>
      <div class="d-none name"><code>gl_speech.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Turn audio into text</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gl_speech</span><span class="op">(</span></span>
<span>  <span class="va">audio_source</span>,</span>
<span>  encoding <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LINEAR16"</span>, <span class="st">"FLAC"</span>, <span class="st">"MULAW"</span>, <span class="st">"AMR"</span>, <span class="st">"AMR_WB"</span>, <span class="st">"OGG_OPUS"</span>,</span>
<span>    <span class="st">"SPEEX_WITH_HEADER_BYTE"</span><span class="op">)</span>,</span>
<span>  sampleRateHertz <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  languageCode <span class="op">=</span> <span class="st">"en-US"</span>,</span>
<span>  maxAlternatives <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  profanityFilter <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  speechContexts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  asynch <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  customConfig <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>audio_source</dt>
<dd><p>File location of audio data, or Google Cloud Storage URI</p></dd>


<dt>encoding</dt>
<dd><p>Encoding of audio data sent</p></dd>


<dt>sampleRateHertz</dt>
<dd><p>Sample rate in Hertz of audio data. Valid values <code>8000-48000</code>. Optimal and default if left <code>NULL</code> is <code>16000</code></p></dd>


<dt>languageCode</dt>
<dd><p>Language of the supplied audio as a <code>BCP-47</code> language tag</p></dd>


<dt>maxAlternatives</dt>
<dd><p>Maximum number of recognition hypotheses to be returned. <code>0-30</code></p></dd>


<dt>profanityFilter</dt>
<dd><p>If <code>TRUE</code> will attempt to filter out profanities</p></dd>


<dt>speechContexts</dt>
<dd><p>An optional character vector of context to assist the speech recognition</p></dd>


<dt>asynch</dt>
<dd><p>If your <code>audio_source</code> is greater than 60 seconds, set this to TRUE to return an asynchronous call</p></dd>


<dt>customConfig</dt>
<dd><p>[optional] A <code>RecognitionConfig</code> object that will be converted from a list to JSON via <code><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html" class="external-link">toJSON</a></code> - see <a href="https://cloud.google.com/speech-to-text/docs/reference/rest/v1p1beta1/RecognitionConfig" class="external-link">RecognitionConfig documentation</a>. The <code>languageCode</code> will be taken from this functions arguments if not present since it is required.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list of two tibbles:  <code>$transcript</code>, a tibble of the <code>transcript</code> with a <code>confidence</code>; <code>$timings</code>, a tibble that contains <code>startTime</code>, <code>endTime</code> per <code>word</code>.  If maxAlternatives is greater than 1, then the transcript will return near-duplicate rows with other interpretations of the text.
 If <code>asynch</code> is TRUE, then an operation you will need to pass to <a href="gl_speech_op.html">gl_speech_op</a> to get the finished result.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Google Cloud Speech API enables developers to convert audio to text by applying powerful
neural network models in an easy to use API.
The API recognizes over 80 languages and variants, to support your global user base.
You can transcribe the text of users dictating to an application’s microphone,
enable command-and-control through voice, or transcribe audio files, among many other use cases.
Recognize audio uploaded in the request, and integrate with your audio storage on Google Cloud Storage,
by using the same technology Google uses to power its own products.</p>
    </div>
    <div class="section level2">
    <h2 id="audioencoding">AudioEncoding<a class="anchor" aria-label="anchor" href="#audioencoding"></a></h2>
    


<p>Audio encoding of the data sent in the audio message. All encodings support only 1 channel (mono) audio.
Only FLAC and WAV include a header that describes the bytes of audio that follow the header.
The other encodings are raw audio bytes with no header.
For best results, the audio source should be captured and transmitted using a
lossless encoding (FLAC or LINEAR16).
Recognition accuracy may be reduced if lossy codecs, which include the other codecs listed in this section,
are used to capture or transmit the audio, particularly if background noise is present.</p>
<p>Read more on audio encodings here <a href="https://cloud.google.com/speech/docs/encoding" class="external-link">https://cloud.google.com/speech/docs/encoding</a></p>
    </div>
    <div class="section level2">
    <h2 id="wordinfo">WordInfo<a class="anchor" aria-label="anchor" href="#wordinfo"></a></h2>
    



<p><code>startTime</code> - Time offset relative to the beginning of the audio, and corresponding to the start of the spoken word.</p>
<p><code>endTime</code> - Time offset relative to the beginning of the audio, and corresponding to the end of the spoken word.</p>
<p><code>word</code> - The word corresponding to this set of information.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://cloud.google.com/speech/reference/rest/v1/speech/recognize" class="external-link">https://cloud.google.com/speech/reference/rest/v1/speech/recognize</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">test_audio</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"woman1_wb.wav"</span>, package <span class="op">=</span> <span class="st">"googleLanguageR"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">gl_speech</span><span class="op">(</span><span class="va">test_audio</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">transcript</span></span></span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">timings</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result2</span> <span class="op">&lt;-</span> <span class="fu">gl_speech</span><span class="op">(</span><span class="va">test_audio</span>, maxAlternatives <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result2</span><span class="op">$</span><span class="va">transcript</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result_brit</span> <span class="op">&lt;-</span> <span class="fu">gl_speech</span><span class="op">(</span><span class="va">test_audio</span>, languageCode <span class="op">=</span> <span class="st">"en-GB"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## make an asynchronous API request (mandatory for sound files over 60 seconds)</span></span></span>
<span class="r-in"><span><span class="va">asynch</span> <span class="op">&lt;-</span> <span class="fu">gl_speech</span><span class="op">(</span><span class="va">test_audio</span>, asynch <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Send to gl_speech_op() for status or finished result</span></span></span>
<span class="r-in"><span><span class="fu"><a href="gl_speech_op.html">gl_speech_op</a></span><span class="op">(</span><span class="va">asynch</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Upload to GCS bucket for long files &gt; 60 seconds</span></span></span>
<span class="r-in"><span><span class="va">test_gcs</span> <span class="op">&lt;-</span> <span class="st">"gs://mark-edmondson-public-files/googleLanguageR/a-dream-mono.wav"</span></span></span>
<span class="r-in"><span><span class="va">gcs</span> <span class="op">&lt;-</span> <span class="fu">gl_speech</span><span class="op">(</span><span class="va">test_gcs</span>, sampleRateHertz <span class="op">=</span> <span class="fl">44100L</span>, asynch <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="gl_speech_op.html">gl_speech_op</a></span><span class="op">(</span><span class="va">gcs</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Use a custom configuration</span></span></span>
<span class="r-in"><span><span class="va">my_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>encoding <span class="op">=</span> <span class="st">"LINEAR16"</span>,</span></span>
<span class="r-in"><span>                  diarizationConfig <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>                    enableSpeakerDiarization <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                    minSpeakerCount <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                    maxSpeakCount <span class="op">=</span> <span class="fl">3</span></span></span>
<span class="r-in"><span>                    <span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># languageCode is required, so will be added if not in your custom config</span></span></span>
<span class="r-in"><span><span class="fu">gl_speech</span><span class="op">(</span><span class="va">my_audio</span>, languageCode <span class="op">=</span> <span class="st">"en-US"</span>, customConfig <span class="op">=</span> <span class="va">my_config</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>

  

  

  </body></html>

